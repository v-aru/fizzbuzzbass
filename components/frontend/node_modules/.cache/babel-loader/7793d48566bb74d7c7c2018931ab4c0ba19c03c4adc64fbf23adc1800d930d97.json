{"ast":null,"code":"'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar hase = require('hase'),\n  retry = require('async-retry');\nvar Sender = /*#__PURE__*/\nfunction () {\n  function Sender(_ref) {\n    var url = _ref.url,\n      application = _ref.application;\n    (0, _classCallCheck2.default)(this, Sender);\n    if (!url) {\n      throw new Error('Url is missing.');\n    }\n    if (!application) {\n      throw new Error('Application is missing.');\n    }\n    this.url = url;\n    this.application = application;\n  }\n  (0, _createClass2.default)(Sender, [{\n    key: \"link\",\n    value: function () {\n      var _link = (0, _asyncToGenerator2.default)(/*#__PURE__*/\n      _regenerator.default.mark(function _callee2(app, incoming, outgoing) {\n        var _this = this;\n        var logger, mq, writeStream;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (app) {\n                  _context2.next = 2;\n                  break;\n                }\n                throw new Error('App is missing.');\n              case 2:\n                if (incoming) {\n                  _context2.next = 4;\n                  break;\n                }\n                throw new Error('Incoming is missing.');\n              case 4:\n                if (outgoing) {\n                  _context2.next = 6;\n                  break;\n                }\n                throw new Error('Outgoing is missing.');\n              case 6:\n                logger = app.services.getLogger();\n                _context2.prev = 7;\n                _context2.next = 10;\n                return retry(/*#__PURE__*/\n                (0, _asyncToGenerator2.default)(/*#__PURE__*/\n                _regenerator.default.mark(function _callee() {\n                  var url, connection;\n                  return _regenerator.default.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          url = _this.url;\n                          _context.next = 3;\n                          return hase.connect({\n                            url: url\n                          });\n                        case 3:\n                          connection = _context.sent;\n                          return _context.abrupt(\"return\", connection);\n                        case 5:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                })));\n              case 10:\n                mq = _context2.sent;\n                _context2.next = 16;\n                break;\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](7);\n                return _context2.abrupt(\"return\", outgoing.emit('error', _context2.t0));\n              case 16:\n                mq.on('error', function (err) {\n                  outgoing.emit('error', err);\n                });\n                mq.on('disconnect', function () {\n                  outgoing.emit('disconnect');\n                });\n                _context2.prev = 18;\n                _context2.next = 21;\n                return mq.publisher(\"\".concat(this.application, \"::events\")).createWriteStream();\n              case 21:\n                writeStream = _context2.sent;\n                _context2.next = 27;\n                break;\n              case 24:\n                _context2.prev = 24;\n                _context2.t1 = _context2[\"catch\"](18);\n                return _context2.abrupt(\"return\", incoming.emit('error', _context2.t1));\n              case 27:\n                logger.debug('Started eventbus (sender) endpoint.', {\n                  url: this.url,\n                  application: this.application\n                });\n                outgoing.on('data', function (event) {\n                  writeStream.write(event);\n                });\n              case 29:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[7, 13], [18, 24]]);\n      }));\n      function link(_x, _x2, _x3) {\n        return _link.apply(this, arguments);\n      }\n      return link;\n    }()\n  }]);\n  return Sender;\n}();\nmodule.exports = Sender;","map":{"version":3,"names":["_interopRequireDefault","require","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","hase","retry","Sender","_ref","url","application","default","Error","key","value","_link","mark","_callee2","app","incoming","outgoing","_this","logger","mq","writeStream","wrap","_callee2$","_context2","prev","next","services","getLogger","_callee","connection","_callee$","_context","connect","sent","abrupt","stop","t0","emit","on","err","publisher","concat","createWriteStream","t1","debug","event","write","link","_x","_x2","_x3","apply","arguments","module","exports"],"sources":["/Users/anandarunima/Documents/Arunima/Coursework/sauce_labs-fizzbuzzbash/fizzbuzzbass/components/node_modules/tailwind/dist/wires/eventbus/amqp/Sender.js"],"sourcesContent":["'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar hase = require('hase'),\n    retry = require('async-retry');\n\nvar Sender =\n/*#__PURE__*/\nfunction () {\n  function Sender(_ref) {\n    var url = _ref.url,\n        application = _ref.application;\n    (0, _classCallCheck2.default)(this, Sender);\n\n    if (!url) {\n      throw new Error('Url is missing.');\n    }\n\n    if (!application) {\n      throw new Error('Application is missing.');\n    }\n\n    this.url = url;\n    this.application = application;\n  }\n\n  (0, _createClass2.default)(Sender, [{\n    key: \"link\",\n    value: function () {\n      var _link = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee2(app, incoming, outgoing) {\n        var _this = this;\n\n        var logger, mq, writeStream;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (app) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw new Error('App is missing.');\n\n              case 2:\n                if (incoming) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                throw new Error('Incoming is missing.');\n\n              case 4:\n                if (outgoing) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                throw new Error('Outgoing is missing.');\n\n              case 6:\n                logger = app.services.getLogger();\n                _context2.prev = 7;\n                _context2.next = 10;\n                return retry(\n                /*#__PURE__*/\n                (0, _asyncToGenerator2.default)(\n                /*#__PURE__*/\n                _regenerator.default.mark(function _callee() {\n                  var url, connection;\n                  return _regenerator.default.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          url = _this.url;\n                          _context.next = 3;\n                          return hase.connect({\n                            url: url\n                          });\n\n                        case 3:\n                          connection = _context.sent;\n                          return _context.abrupt(\"return\", connection);\n\n                        case 5:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                })));\n\n              case 10:\n                mq = _context2.sent;\n                _context2.next = 16;\n                break;\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](7);\n                return _context2.abrupt(\"return\", outgoing.emit('error', _context2.t0));\n\n              case 16:\n                mq.on('error', function (err) {\n                  outgoing.emit('error', err);\n                });\n                mq.on('disconnect', function () {\n                  outgoing.emit('disconnect');\n                });\n                _context2.prev = 18;\n                _context2.next = 21;\n                return mq.publisher(\"\".concat(this.application, \"::events\")).createWriteStream();\n\n              case 21:\n                writeStream = _context2.sent;\n                _context2.next = 27;\n                break;\n\n              case 24:\n                _context2.prev = 24;\n                _context2.t1 = _context2[\"catch\"](18);\n                return _context2.abrupt(\"return\", incoming.emit('error', _context2.t1));\n\n              case 27:\n                logger.debug('Started eventbus (sender) endpoint.', {\n                  url: this.url,\n                  application: this.application\n                });\n                outgoing.on('data', function (event) {\n                  writeStream.write(event);\n                });\n\n              case 29:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[7, 13], [18, 24]]);\n      }));\n\n      function link(_x, _x2, _x3) {\n        return _link.apply(this, arguments);\n      }\n\n      return link;\n    }()\n  }]);\n  return Sender;\n}();\n\nmodule.exports = Sender;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}