{"ast":null,"code":"'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _require = require('stream'),\n  PassThrough = _require.PassThrough;\nvar WriteStream = require('./WriteStream');\nvar Publisher = /*#__PURE__*/\nfunction () {\n  function Publisher(channel, name) {\n    (0, _classCallCheck2.default)(this, Publisher);\n    this.channel = channel;\n    this.name = name;\n  }\n  (0, _createClass2.default)(Publisher, [{\n    key: \"createWriteStream\",\n    value: function () {\n      var _createWriteStream = (0, _asyncToGenerator2.default)(/*#__PURE__*/\n      _regenerator.default.mark(function _callee() {\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.channel.assertExchange(this.name, 'fanout', {\n                  durable: true\n                });\n              case 2:\n                return _context.abrupt(\"return\", new WriteStream(this.channel, this.name));\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      return function createWriteStream() {\n        return _createWriteStream.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"createReadStream\",\n    value: function () {\n      var _createReadStream = (0, _asyncToGenerator2.default)(/*#__PURE__*/\n      _regenerator.default.mark(function _callee2() {\n        var _this = this;\n        var ok, generatedQueueName, readStream;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.channel.assertExchange(this.name, 'fanout', {\n                  durable: true\n                });\n              case 2:\n                _context2.next = 4;\n                return this.channel.assertQueue('', {\n                  autoDelete: true,\n                  exclusive: true\n                });\n              case 4:\n                ok = _context2.sent;\n                generatedQueueName = ok.queue;\n                _context2.next = 8;\n                return this.channel.bindQueue(generatedQueueName, this.name, '', {});\n              case 8:\n                readStream = new PassThrough({\n                  objectMode: true\n                });\n                _context2.next = 11;\n                return this.channel.consume(generatedQueueName, function (message) {\n                  var parsedMessage = {};\n                  parsedMessage.payload = JSON.parse(message.content.toString('utf8'));\n                  parsedMessage.next = function () {\n                    _this.channel.ack(message);\n                  };\n                  parsedMessage.discard = function () {\n                    _this.channel.nack(message, false, false);\n                  };\n                  parsedMessage.defer = function () {\n                    _this.channel.nack(message, false, true);\n                  };\n                  readStream.write(parsedMessage);\n                }, {});\n              case 11:\n                return _context2.abrupt(\"return\", readStream);\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n      return function createReadStream() {\n        return _createReadStream.apply(this, arguments);\n      };\n    }()\n  }]);\n  return Publisher;\n}();\nmodule.exports = Publisher;","map":{"version":3,"names":["_interopRequireDefault","require","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_require","PassThrough","WriteStream","Publisher","channel","name","default","key","value","_createWriteStream","mark","_callee","wrap","_callee$","_context","prev","next","assertExchange","durable","abrupt","stop","createWriteStream","apply","arguments","_createReadStream","_callee2","_this","ok","generatedQueueName","readStream","_callee2$","_context2","assertQueue","autoDelete","exclusive","sent","queue","bindQueue","objectMode","consume","message","parsedMessage","payload","JSON","parse","content","toString","ack","discard","nack","defer","write","createReadStream","module","exports"],"sources":["/Users/anandarunima/Documents/Arunima/Coursework/sauce_labs-fizzbuzzbash/fizzbuzzbass/components/node_modules/hase/dist/publisher/index.js"],"sourcesContent":["'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _require = require('stream'),\n    PassThrough = _require.PassThrough;\n\nvar WriteStream = require('./WriteStream');\n\nvar Publisher =\n/*#__PURE__*/\nfunction () {\n  function Publisher(channel, name) {\n    (0, _classCallCheck2.default)(this, Publisher);\n    this.channel = channel;\n    this.name = name;\n  }\n\n  (0, _createClass2.default)(Publisher, [{\n    key: \"createWriteStream\",\n    value: function () {\n      var _createWriteStream = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee() {\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.channel.assertExchange(this.name, 'fanout', {\n                  durable: true\n                });\n\n              case 2:\n                return _context.abrupt(\"return\", new WriteStream(this.channel, this.name));\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function createWriteStream() {\n        return _createWriteStream.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"createReadStream\",\n    value: function () {\n      var _createReadStream = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee2() {\n        var _this = this;\n\n        var ok, generatedQueueName, readStream;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.channel.assertExchange(this.name, 'fanout', {\n                  durable: true\n                });\n\n              case 2:\n                _context2.next = 4;\n                return this.channel.assertQueue('', {\n                  autoDelete: true,\n                  exclusive: true\n                });\n\n              case 4:\n                ok = _context2.sent;\n                generatedQueueName = ok.queue;\n                _context2.next = 8;\n                return this.channel.bindQueue(generatedQueueName, this.name, '', {});\n\n              case 8:\n                readStream = new PassThrough({\n                  objectMode: true\n                });\n                _context2.next = 11;\n                return this.channel.consume(generatedQueueName, function (message) {\n                  var parsedMessage = {};\n                  parsedMessage.payload = JSON.parse(message.content.toString('utf8'));\n\n                  parsedMessage.next = function () {\n                    _this.channel.ack(message);\n                  };\n\n                  parsedMessage.discard = function () {\n                    _this.channel.nack(message, false, false);\n                  };\n\n                  parsedMessage.defer = function () {\n                    _this.channel.nack(message, false, true);\n                  };\n\n                  readStream.write(parsedMessage);\n                }, {});\n\n              case 11:\n                return _context2.abrupt(\"return\", readStream);\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function createReadStream() {\n        return _createReadStream.apply(this, arguments);\n      };\n    }()\n  }]);\n  return Publisher;\n}();\n\nmodule.exports = Publisher;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}