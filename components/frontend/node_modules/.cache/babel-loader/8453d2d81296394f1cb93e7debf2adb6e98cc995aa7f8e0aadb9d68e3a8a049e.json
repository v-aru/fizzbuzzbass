{"ast":null,"code":"'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar Command = require('commands-events').Command;\nvar sendMessage = require('./wsSendMessage'),\n  validateCommand = require('./validateCommand');\nvar postCommand = {\n  send: function () {\n    var _send = (0, _asyncToGenerator2.default)(/*#__PURE__*/\n    _regenerator.default.mark(function _callee(socket, _ref) {\n      var app, message, writeModel, logger, command, token;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              app = _ref.app, message = _ref.message, writeModel = _ref.writeModel;\n              if (socket) {\n                _context.next = 3;\n                break;\n              }\n              throw new Error('Socket is missing.');\n            case 3:\n              if (app) {\n                _context.next = 5;\n                break;\n              }\n              throw new Error('App is missing.');\n            case 5:\n              if (message) {\n                _context.next = 7;\n                break;\n              }\n              throw new Error('Message is missing.');\n            case 7:\n              if (writeModel) {\n                _context.next = 9;\n                break;\n              }\n              throw new Error('Write model is missing.');\n            case 9:\n              logger = app.services.getLogger();\n              command = message.payload;\n              token = message.token;\n              _context.prev = 12;\n              validateCommand(command, writeModel);\n              _context.next = 27;\n              break;\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](12);\n              _context.prev = 18;\n              _context.next = 21;\n              return sendMessage(socket, {\n                type: 'error',\n                statusCode: 400,\n                payload: _context.t0.message,\n                procedureId: message.procedureId\n              });\n            case 21:\n              _context.next = 26;\n              break;\n            case 23:\n              _context.prev = 23;\n              _context.t1 = _context[\"catch\"](18);\n              logger.error('Failed to send message.', {\n                ex: _context.t0\n              });\n            case 26:\n              return _context.abrupt(\"return\");\n            case 27:\n              command = Command.wrap(command);\n              command.addToken(token);\n              app.api.incoming.write(command);\n              _context.prev = 30;\n              _context.next = 33;\n              return sendMessage(socket, {\n                type: 'sentCommand',\n                statusCode: 200,\n                procedureId: message.procedureId\n              });\n            case 33:\n              _context.next = 38;\n              break;\n            case 35:\n              _context.prev = 35;\n              _context.t2 = _context[\"catch\"](30);\n              logger.error('Failed to send message.', {\n                exSendMessage: _context.t2\n              });\n            case 38:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[12, 16], [18, 23], [30, 35]]);\n    }));\n    function send(_x, _x2) {\n      return _send.apply(this, arguments);\n    }\n    return send;\n  }()\n};\nmodule.exports = postCommand;","map":{"version":3,"names":["_interopRequireDefault","require","_regenerator","_asyncToGenerator2","Command","sendMessage","validateCommand","postCommand","send","_send","default","mark","_callee","socket","_ref","app","message","writeModel","logger","command","token","wrap","_callee$","_context","prev","next","Error","services","getLogger","payload","t0","type","statusCode","procedureId","t1","error","ex","abrupt","addToken","api","incoming","write","t2","exSendMessage","stop","_x","_x2","apply","arguments","module","exports"],"sources":["/Users/anandarunima/Documents/Arunima/Coursework/sauce_labs-fizzbuzzbash/fizzbuzzbass/components/node_modules/tailwind/dist/wires/api/http/v1/wsPostCommand.js"],"sourcesContent":["'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar Command = require('commands-events').Command;\n\nvar sendMessage = require('./wsSendMessage'),\n    validateCommand = require('./validateCommand');\n\nvar postCommand = {\n  send: function () {\n    var _send = (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee(socket, _ref) {\n      var app, message, writeModel, logger, command, token;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              app = _ref.app, message = _ref.message, writeModel = _ref.writeModel;\n\n              if (socket) {\n                _context.next = 3;\n                break;\n              }\n\n              throw new Error('Socket is missing.');\n\n            case 3:\n              if (app) {\n                _context.next = 5;\n                break;\n              }\n\n              throw new Error('App is missing.');\n\n            case 5:\n              if (message) {\n                _context.next = 7;\n                break;\n              }\n\n              throw new Error('Message is missing.');\n\n            case 7:\n              if (writeModel) {\n                _context.next = 9;\n                break;\n              }\n\n              throw new Error('Write model is missing.');\n\n            case 9:\n              logger = app.services.getLogger();\n              command = message.payload;\n              token = message.token;\n              _context.prev = 12;\n              validateCommand(command, writeModel);\n              _context.next = 27;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](12);\n              _context.prev = 18;\n              _context.next = 21;\n              return sendMessage(socket, {\n                type: 'error',\n                statusCode: 400,\n                payload: _context.t0.message,\n                procedureId: message.procedureId\n              });\n\n            case 21:\n              _context.next = 26;\n              break;\n\n            case 23:\n              _context.prev = 23;\n              _context.t1 = _context[\"catch\"](18);\n              logger.error('Failed to send message.', {\n                ex: _context.t0\n              });\n\n            case 26:\n              return _context.abrupt(\"return\");\n\n            case 27:\n              command = Command.wrap(command);\n              command.addToken(token);\n              app.api.incoming.write(command);\n              _context.prev = 30;\n              _context.next = 33;\n              return sendMessage(socket, {\n                type: 'sentCommand',\n                statusCode: 200,\n                procedureId: message.procedureId\n              });\n\n            case 33:\n              _context.next = 38;\n              break;\n\n            case 35:\n              _context.prev = 35;\n              _context.t2 = _context[\"catch\"](30);\n              logger.error('Failed to send message.', {\n                exSendMessage: _context.t2\n              });\n\n            case 38:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[12, 16], [18, 23], [30, 35]]);\n    }));\n\n    function send(_x, _x2) {\n      return _send.apply(this, arguments);\n    }\n\n    return send;\n  }()\n};\nmodule.exports = postCommand;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}