{"ast":null,"code":"'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar Command = require('commands-events').Command,\n  typer = require('content-type');\nvar validateCommand = require('./validateCommand');\nvar postCommand = function postCommand(app, _ref) {\n  var writeModel = _ref.writeModel;\n  return function (req, res) {\n    (0, _asyncToGenerator2.default)(/*#__PURE__*/\n    _regenerator.default.mark(function _callee() {\n      var command, contentType;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              command = req.body;\n              _context.prev = 1;\n              contentType = typer.parse(req);\n              _context.next = 8;\n              break;\n            case 5:\n              _context.prev = 5;\n              _context.t0 = _context[\"catch\"](1);\n              return _context.abrupt(\"return\", res.status(415).send('Header content-type must be application/json.'));\n            case 8:\n              if (!(contentType.type !== 'application/json')) {\n                _context.next = 10;\n                break;\n              }\n              return _context.abrupt(\"return\", res.status(415).send('Header content-type must be application/json.'));\n            case 10:\n              _context.prev = 10;\n              validateCommand(command, writeModel);\n              _context.next = 17;\n              break;\n            case 14:\n              _context.prev = 14;\n              _context.t1 = _context[\"catch\"](10);\n              return _context.abrupt(\"return\", res.status(400).send(_context.t1.message));\n            case 17:\n              command = Command.wrap(command);\n              command.addToken(req.user);\n              app.api.incoming.write(command);\n              res.status(200).end();\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 5], [10, 14]]);\n    }))();\n  };\n};\nmodule.exports = postCommand;","map":{"version":3,"names":["_interopRequireDefault","require","_regenerator","_asyncToGenerator2","Command","typer","validateCommand","postCommand","app","_ref","writeModel","req","res","default","mark","_callee","command","contentType","wrap","_callee$","_context","prev","next","body","parse","t0","abrupt","status","send","type","t1","message","addToken","user","api","incoming","write","end","stop","module","exports"],"sources":["/Users/anandarunima/Documents/Arunima/Coursework/sauce_labs-fizzbuzzbash/fizzbuzzbass/components/node_modules/tailwind/dist/wires/api/http/v1/postCommand.js"],"sourcesContent":["'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar Command = require('commands-events').Command,\n    typer = require('content-type');\n\nvar validateCommand = require('./validateCommand');\n\nvar postCommand = function postCommand(app, _ref) {\n  var writeModel = _ref.writeModel;\n  return function (req, res) {\n    (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee() {\n      var command, contentType;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              command = req.body;\n              _context.prev = 1;\n              contentType = typer.parse(req);\n              _context.next = 8;\n              break;\n\n            case 5:\n              _context.prev = 5;\n              _context.t0 = _context[\"catch\"](1);\n              return _context.abrupt(\"return\", res.status(415).send('Header content-type must be application/json.'));\n\n            case 8:\n              if (!(contentType.type !== 'application/json')) {\n                _context.next = 10;\n                break;\n              }\n\n              return _context.abrupt(\"return\", res.status(415).send('Header content-type must be application/json.'));\n\n            case 10:\n              _context.prev = 10;\n              validateCommand(command, writeModel);\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t1 = _context[\"catch\"](10);\n              return _context.abrupt(\"return\", res.status(400).send(_context.t1.message));\n\n            case 17:\n              command = Command.wrap(command);\n              command.addToken(req.user);\n              app.api.incoming.write(command);\n              res.status(200).end();\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 5], [10, 14]]);\n    }))();\n  };\n};\n\nmodule.exports = postCommand;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}